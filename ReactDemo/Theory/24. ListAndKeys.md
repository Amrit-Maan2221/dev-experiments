# Lists & Keys in React (WHY Keys Matter)

## 1Ô∏è‚É£ Lists in React (Basic)

Rendering a list:

```jsx
const items = ["Apple", "Banana", "Orange"];

<ul>
  {items.map(item => (
    <li>{item}</li>
  ))}
</ul>
```

‚ö†Ô∏è React warning:

> Each child in a list should have a unique "key" prop

---

## 2Ô∏è‚É£ What Is a Key?

> A **key** is a special prop that helps React **identify which items have changed, added, or removed**.

Keys are used **internally by React**, not passed as props.

---

## 3Ô∏è‚É£ Correct List with Keys

```jsx
<ul>
  {items.map(item => (
    <li key={item}>{item}</li>
  ))}
</ul>
```

---

# 4Ô∏è‚É£ WHY Keys Matter (The Real Reason)

### React does NOT re-render everything blindly.

It:

1. Builds a **Virtual DOM**
2. Compares old vs new (**reconciliation**)
3. Updates **only what changed**

Keys tell React:

> ‚ÄúThis element is the same one as before‚Äù

---

## 5Ô∏è‚É£ Without Keys (What React Does)

```jsx
["A", "B", "C"]
‚Üí
["B", "C"]
```

Without keys:

* React matches by **position**
* `A ‚Üí B`
* `B ‚Üí C`
* `C ‚Üí removed`

‚ùå Wrong mapping
‚ùå DOM reuse incorrectly
‚ùå Bugs appear

---

## 6Ô∏è‚É£ With Keys (Correct Mapping)

```jsx
key="A"
key="B"
key="C"
```

React sees:

* Remove `A`
* Keep `B`
* Keep `C`

‚úî Correct updates
‚úî Stable UI

---

# 7Ô∏è‚É£ The Index as Key (Common Trap)

‚ùå Bad:

```jsx
items.map((item, index) => (
  <li key={index}>{item}</li>
))
```

### Why Index Is Dangerous

When:

* Items inserted
* Items deleted
* Items reordered

React reuses DOM nodes incorrectly.

---

## 8Ô∏è‚É£ Real Bug Example (Very Important)

```jsx
const [items, setItems] = useState([
  { id: 1, text: "Task A" },
  { id: 2, text: "Task B" }
]);
```

User types in second input
Remove first item

If using index as key:

* Input values jump
* Focus breaks
* Wrong state sticks

This is **classic production bug**.

---

# 9Ô∏è‚É£ Correct Key Choice (Rules)

### Best Keys:

‚úÖ Database ID
‚úÖ UUID
‚úÖ Stable unique value

```jsx
<li key={item.id}>{item.name}</li>
```

---

### Acceptable (Rare):

```jsx
key={item.email}
```

Only if:

* Unique
* Stable
* Never changes

---

### Never Use:

‚ùå Index (unless list is static)
‚ùå Random values
‚ùå `Math.random()`

---

# 10Ô∏è‚É£ When Index Key Is OK (Only Case)

Index is acceptable **only if ALL are true**:

* List never changes
* No insert/delete
* No reorder
* Purely static

Example:

```jsx
const days = ["Mon", "Tue", "Wed"];
```

---

# 11Ô∏è‚É£ Keys in Your Project (Real Use)

### Catalog List

```jsx
items.map(item => (
  <CatalogCard key={item.id} item={item} />
))
```

### Inventory List

```jsx
inventory.map(inv => (
  <InventoryRow key={inv.catalogItemId} />
))
```

---

# 12Ô∏è‚É£ Interview One-Liner (Must Memorize)

> **Keys help React identify which elements have changed, enabling efficient reconciliation and correct DOM updates.**

---

# üîë Mental Model

* React = diff engine
* Keys = identity
* No key = guesswork
* Bad key = wrong guesses

---

